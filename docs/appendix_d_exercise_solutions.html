<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.267">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="This text is intended for the modern study of hydrology and mathematical modeling of hydrological systems in semi-arid Central Asia. It is geared towards students and teachers that would like to learn about these topics in an applied manner. The book adopts an open-educational philosophy and promotes the use of open data and free of charge software. This is the 2022 release of the book.">
<title>Modeling of Hydrological Systems in Semi-Arid Central Asia - Appendix D — Exercise Solutions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>
<script src="site_libs/quarto-nav/quarto-nav.js"></script><script src="site_libs/quarto-nav/headroom.min.js"></script><script src="site_libs/clipboard/clipboard.min.js"></script><meta name="quarto:offset" content="./">
<script src="site_libs/quarto-search/autocomplete.umd.js"></script><script src="site_libs/quarto-search/fuse.min.js"></script><script src="site_libs/quarto-search/quarto-search.js"></script><link href="./appendix_c_quick_guides.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script><script src="site_libs/quarto-html/popper.min.js"></script><script src="site_libs/quarto-html/tippy.umd.min.js"></script><script src="site_libs/quarto-html/anchor.min.js"></script><link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link id="quarto-text-highlighting-styles" href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet">
<script src="site_libs/bootstrap/bootstrap.min.js"></script><link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
</head>
<body class="floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Appendix D — Exercise Solutions</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Modeling of Hydrological Systems in Semi-Arid Central Asia</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/hydrosolutions/caham_book" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
<li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
            <i class="bi bi-bi-linkedin pe-1"></i>
          LinkedIn
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Welcome</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./study_guide_materials.html" class="sidebar-item-text sidebar-link">Study Guide and Materials</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a href="./hydrology_of_central_asia.html" class="sidebar-item-text sidebar-link">Part I: Hydrology of Semi-Arid Central Asia</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hydrological_systems.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Hydrological Systems in Semi-Arid Central Asia</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./example_river_basins.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Case Study River Basins</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a href="./data.html" class="sidebar-item-text sidebar-link">Part II: Data Sources, Retrieval and Preparation</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_sources.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Sources of Relevant Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discharge_station_data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Discharge Station Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./geospatial_data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Geospatial Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./snow_and_glacier_data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Snow and Glacier Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./climate_data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Climate Data</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a href="./hydrological_modeling.html" class="sidebar-item-text sidebar-link">Part III: Hydrological Modeling &amp; Applications</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hydraulic_hydrological_modeling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Hydrological-Hydraulic Modeling</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./long_term_water_balance_modeling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Long-term Water Balance Modeling</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./modeling_using_predictive_inference.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Modeling Using Predictive Inference</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glacier_modeling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Modeling of Discharge from Glacier Melt</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./real_world_examples.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Real World Hydrological Model Applications</span></a>
  </div>
</li>
    </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">Appendices</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix_a_free_software.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Software</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix_b_riverscentralasia_r_toolbox.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">R Toolbox riversCentralAsia</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix_c_quick_guides.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Quick Guides</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix_d_exercise_solutions.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Exercise Solutions</span></a>
  </div>
</li>
    </ul>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#sec-appendix-solutions-exercise1" id="toc-sec-appendix-solutions-exercise1" class="nav-link active" data-scroll-target="#sec-appendix-solutions-exercise1"> <span class="header-section-number">D.1</span> Exercise on Linear Reservoir modelling</a>
  <ul class="collapse">
<li><a href="#sec-solution-task1-experimental-setup" id="toc-sec-solution-task1-experimental-setup" class="nav-link" data-scroll-target="#sec-solution-task1-experimental-setup">Task 1</a></li>
  <li><a href="#sec-solution-task2-perform-experiment" id="toc-sec-solution-task2-perform-experiment" class="nav-link" data-scroll-target="#sec-solution-task2-perform-experiment">Task 2</a></li>
  <li><a href="#sec-solution-task3-simulate" id="toc-sec-solution-task3-simulate" class="nav-link" data-scroll-target="#sec-solution-task3-simulate">Task 3</a></li>
  </ul>
</li>
  <li>
<a href="#sec-appendix-solutions-hbv-exercises" id="toc-sec-appendix-solutions-hbv-exercises" class="nav-link" data-scroll-target="#sec-appendix-solutions-hbv-exercises"> <span class="header-section-number">D.2</span> Exercises on the HBV Model</a>
  <ul class="collapse">
<li><a href="#sec-appendix-solutions-hbv-driving-forces" id="toc-sec-appendix-solutions-hbv-driving-forces" class="nav-link" data-scroll-target="#sec-appendix-solutions-hbv-driving-forces">Exercise: Driving Forces of the HBV Model</a></li>
  <li><a href="#sec-appendix-solutions-hbv-parameters-states" id="toc-sec-appendix-solutions-hbv-parameters-states" class="nav-link" data-scroll-target="#sec-appendix-solutions-hbv-parameters-states">Exercise - HBV Model States</a></li>
  <li><a href="#sec-appendix-solutions-plot-temperature-and-precipitation-1984" id="toc-sec-appendix-solutions-plot-temperature-and-precipitation-1984" class="nav-link" data-scroll-target="#sec-appendix-solutions-plot-temperature-and-precipitation-1984">Exercise: Data Visualization in RSMinerve</a></li>
  <li><a href="#sec-appendix-solutions-compare-evaporation-methods" id="toc-sec-appendix-solutions-compare-evaporation-methods" class="nav-link" data-scroll-target="#sec-appendix-solutions-compare-evaporation-methods">Exercise: Compare Evaporation Methods</a></li>
  <li><a href="#sec-appendix-solutions-common-calibration-issues" id="toc-sec-appendix-solutions-common-calibration-issues" class="nav-link" data-scroll-target="#sec-appendix-solutions-common-calibration-issues">Exercise: Common Difficulties in Model Calibration</a></li>
  <li><a href="#sec-appendix-solutions-strategies-for-issues" id="toc-sec-appendix-solutions-strategies-for-issues" class="nav-link" data-scroll-target="#sec-appendix-solutions-strategies-for-issues">Exercise: Strategies to Overcome some of the Model Calibration Difficulties</a></li>
  <li><a href="#exercise-calibrate-a-simple-hbv-model-sec-appendix-solutions-calibrated-parameters-.unnumbered" id="toc-exercise-calibrate-a-simple-hbv-model-sec-appendix-solutions-calibrated-parameters-.unnumbered" class="nav-link" data-scroll-target="#exercise-calibrate-a-simple-hbv-model-sec-appendix-solutions-calibrated-parameters-.unnumbered"> <span class="header-section-number">D.2.1</span> Exercise: Calibrate a Simple HBV Model {#sec-appendix-solutions-calibrated parameters .unnumbered}</a></li>
  </ul>
</li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/hydrosolutions/caham_book/edit/master/appendix_d_exercise_solutions.qmd" class="toc-action">Edit this page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="sec-exercise-solutions" class="quarto-section-identifier d-none d-lg-block">Appendix D — Exercise Solutions</span></h1>
</div>

<div>
  <div class="description">
    This text is intended for the modern study of hydrology and mathematical modeling of hydrological systems in semi-arid Central Asia. It is geared towards students and teachers that would like to learn about these topics in an applied manner. The book adopts an open-educational philosophy and promotes the use of open data and free of charge software. This is the 2022 release of the book.
  </div>
</div>




<div class="quarto-title-meta">

    
    
  </div>
  

</header><section id="sec-appendix-solutions-exercise1" class="level2" data-number="D.1"><h2 data-number="D.1" class="anchored" data-anchor-id="sec-appendix-solutions-exercise1">
<span class="header-section-number">D.1</span> Exercise on Linear Reservoir modelling</h2>
<section id="sec-solution-task1-experimental-setup" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="sec-solution-task1-experimental-setup">Task 1</h3>
<section id="what-will-determine-the-flow-through-your-bucket" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="what-will-determine-the-flow-through-your-bucket">What will determine the flow through your bucket?</h4>
<p>The flow through the bucket will be influenced by the volume to bottom area fraction of the bucket, the amount and speed of water added to the bucket and the size of the outlet hole.</p>
</section><section id="what-do-you-need-to-measure" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="what-do-you-need-to-measure">What do you need to measure?</h4>
<p>You will need to measure:</p>
<ul>
<li>the discharge from your bucket over time,<br>
</li>
<li>the recharge volume (how much water you put into the bucket over a given time),<br>
</li>
<li>the time when you start pouring water and when you stop pouring water into the bucket, and</li>
<li>the approximate volume of your bucket.</li>
</ul></section><section id="how-can-you-measure-it" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="how-can-you-measure-it">How can you measure it?</h4>
<p>This depends on what you have available. You can draw a water level line outside of your outflow receptacle every 10 seconds and then determine the volume change over time. Maybe you have a scale and a smart phone so you can put your outflow receptacle on the scale and make a movie of the weight change over time (note, 1 kg of water is approximately 1 liter of water).</p>
<p>For the inflow pour a well defined volume over a well defined time interval. You can do this manually unless of course you have pipes and valves lying around that you can use.<br>
You will need a watch for measuring time and a receptacle with known volume to measure volumes (or a scale).<br>
A couple of notes on measurement accuracy:</p>
<ul>
<li>Generally, the larger the volumes, the smaller the relative measurement error. Say you measure a discharge of 50 ml in 1 s (i.e.&nbsp;50 ml/s) and you can read your volume with an accuracy of 5 ml and the time with an accuracy of 0.2 s. Your measurement uncertainty becomes 11 ml/s which is more than 20 % of your discharge. If on the other hand, you measure 500 ml over 10 s (which is the same discharge of 50 ml/s) with the same inaccuracies for volume and time your measurement uncertainty for discharge becomes 1 ml/s which is only 2 % of your discharge.<br>
</li>
<li>How do you estimate measurement uncertainties: Measure several times, compute the average and the standard deviation of your measurements assuming a <a href="https://en.wikipedia.org/wiki/Student's_t-distribution">student-t distribution</a>.<br>
</li>
<li>How do you combine uncertainties of volume and time to the uncertainty of discharge: By applying <a href="https://en.wikipedia.org/wiki/Propagation_of_uncertainty">Gaussian error propagation</a>.</li>
</ul></section><section id="what-materials-you-will-need-to-set-up-the-experiment" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="what-materials-you-will-need-to-set-up-the-experiment">What materials you will need to set up the experiment?</h4>
<ul>
<li>For the bucket (the linear reservoir): A plastic bottle, a box or a can that is no longer used. It should have an opening at the top and the material should repel water and be thin enough that you can drill a hole into the wall.</li>
<li>A pair of pointy scissors or a knife to drill a hole into the bucket.<br>
</li>
<li>A water source (a tap, hose or a water container larger than the one above). This will be your rain machine.</li>
<li>A watch to measure time.<br>
</li>
<li>Note paper and pen.<br>
</li>
<li>A receptacle for measuring the outflow.<br>
</li>
<li>Additional material to facilitate measurement according to availability.</li>
</ul>
<div id="fig-solution1-example-setup" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/appendix_c_quick_guides/fig_experimentalSetup.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure D.1: Example for material needed and example setup to perform the linear reservoir experiment. Add a minion with a stop watch or a smart phone to help you logging the discharge from the bucket.</figcaption><p></p>
</figure>
</div>
</section></section><section id="sec-solution-task2-perform-experiment" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="sec-solution-task2-perform-experiment">Task 2</h3>
<p>The video was recorded with a smart phone. The weight of the outflow receptacle was noted down every second. The discharge is computed as the change of volume in the outflow receptacle over time.</p>
<iframe width="720" height="480" src="images/appendix_c_quick_guides/bucket_video.mp4" align="middle" frameborder="0" allowfullscreen="">
</iframe>
</section><section id="sec-solution-task3-simulate" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="sec-solution-task3-simulate">Task 3</h3>
<p>The height of the measured discharge peak can be best reproduced with k = 0.42. However, the measured discharge peaks 1s later than the simulated discharge peak.<br>
Reasons for the discrepancy can be the shape of the linear reservoir, non-linear pouring speed, and measurement uncertainties.</p>
</section></section><section id="sec-appendix-solutions-hbv-exercises" class="level2" data-number="D.2"><h2 data-number="D.2" class="anchored" data-anchor-id="sec-appendix-solutions-hbv-exercises">
<span class="header-section-number">D.2</span> Exercises on the HBV Model</h2>
<section id="sec-appendix-solutions-hbv-driving-forces" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="sec-appendix-solutions-hbv-driving-forces">Exercise: Driving Forces of the HBV Model</h3>
<p>The model drivers are precipitation, temperature and evaporation (P, T and ET in <a href="hydraulic_hydrological_modeling.html#fig-overview-hbv-model">Figure&nbsp;<span>8.6</span></a>). You need to provide time series of the model drivers to the model. Evaporation is typically not measured at climate stations but many empirical functions are available in the literature to estimate evaporation. RSMinerve offers the possibility to calculate evaporation based on temperature measurements and catchment location (you will do that later in this tutorial).</p>
</section><section id="sec-appendix-solutions-hbv-parameters-states" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="sec-appendix-solutions-hbv-parameters-states">Exercise - HBV Model States</h3>
<p>The model states are the snow water equivalent height (SWE), the relative water content in the snow pack (WH), the humidity (Hum), the upper reservoir water level (SU) and the lower reservoir water level (SL). The model states are initialized using the initial conditions.</p>
</section><section id="sec-appendix-solutions-plot-temperature-and-precipitation-1984" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="sec-appendix-solutions-plot-temperature-and-precipitation-1984">Exercise: Data Visualization in RSMinerve</h3>
<p>Simulate from the 01/01/1981 01:00:00 to 31/12/1983 23:00:00, then choose data from 31/12/1983 23:00:00 as the initial conditions and run the model from 01/01/1984 01:00:00 to 31/12/1984 23:00:00. Choose hourly output for the simulation results.<br>
Open the Selection and plots tab by clicking on the Selection and plots button in the Modules toolbar and select simulated P and T from the Nauvalisoy station as shown in <a href="#fig-pt-nauvailsoy">Figure&nbsp;<span>D.2</span></a>.</p>
<div id="fig-pt-nauvailsoy" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/appendix_c_quick_guides/fig116_plotPThourly.png" class="img-fluid figure-img"></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure D.2: Hourly precipitation and temperature at the virtual Nauvalisoy weather station.</figcaption><p></p>
</figure>
</div>
<p>Note: If you want to repeat a simulation with specific initial conditions, you can store them through Export IC in the Model Properties toolbar.</p>
<p>The approximate temperature range is -13 deg. C. in December to 34 deg. C. in August. The annual precipitation is about 1.4 m (visualize Pcum and click on the last value of the time series). No precipitation falls during the summer months.</p>
</section><section id="sec-appendix-solutions-compare-evaporation-methods" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="sec-appendix-solutions-compare-evaporation-methods">Exercise: Compare Evaporation Methods</h3>
<p>Figure <a href="#fig-evaporation-discharge">Figure&nbsp;<span>D.3</span></a> shows the evaporation computed with various methods and the resulting discharge. Uniform evaporation should not be used for sub-annual modeling time steps for obvious reasons that ET shows a strong seasonality. The difference between the different methods by Turc, McGuinness and Oudin are within 5 % of total discharge which is negligible for a regional model.</p>
<div id="fig-evaporation-discharge" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/appendix_c_quick_guides/fig119_evaporationDischarge1984.png" class="img-fluid figure-img"></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure D.3: Hourly precipitation and temperature at the virtual Nauvalisoy weather station.</figcaption><p></p>
</figure>
</div>
<p>For advanced modeling, the choice of the evaporation model may be relevant but only if a validation with measured data is possible.</p>
</section><section id="sec-appendix-solutions-common-calibration-issues" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="sec-appendix-solutions-common-calibration-issues">Exercise: Common Difficulties in Model Calibration</h3>
<ol type="1">
<li>Especially fully and semi-distributed hydrological models are typically over-parameterized, i.e.&nbsp;the number of model parameters is much larger than the number of observations for the model states. The true parameter values of the system cannot be uniquely identified based on a discharge time series alone.<br>
</li>
<li>The outcome of the calibration depends on the measure of similarity between the simulated and the measured discharge.</li>
<li>The water balance is often forgotten during model calibration. A nice fit of the discharge curve can for example be achieved by increasing the volume of water in the model over time.</li>
<li>The model is calibrated against historical data. Its ability to predict future discharge may be limited.<br>
</li>
<li>The model is not perfect, it remains an approximation of the real system and may not incorporate all relevant processes of the hydrological cycle (e.g.&nbsp;water storage and transport in glaciers for the case of the HBV model or significant sub-surface water fluxes that very difficult to capture as for example in Karst regions).<br>
</li>
<li>Discharge measurements typically have uncertainties of 20 %. Particularly measurements at the lower and upper ends of the rating curve (i.e.&nbsp;the water table - discharge relationship) are typically prone to larger uncertainties (bonus question: think about why this is so!). Is the measurement location or the equipment not properly maintained, biases may grow over time. On the other hand, if the measurement method is updated and changed, the measured discharge may display a different pattern as was for example discussed in the data from Gunt River basin (<a href="example_river_basins.html#sec-example-gunt-river-basin">Section&nbsp;<span>2.1</span></a>).</li>
</ol></section><section id="sec-appendix-solutions-strategies-for-issues" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="sec-appendix-solutions-strategies-for-issues">Exercise: Strategies to Overcome some of the Model Calibration Difficulties</h3>
<ol type="1">
<li>Over-parameterization:<br>
</li>
</ol>
<ul>
<li>Consider simplifying the model, i.e.&nbsp;reducing the number of parameters. If the model complexity is required, try adding additional measured variables, e.g.&nbsp;snow cover from MODIS data (see Chapter on <a href="#sec-data-snow-cover">snow cover data</a>) to validate individual components of the HBV model.<br>
</li>
<li>Collect data to verify individual fluxes of the model components (e.g.&nbsp;soil parameters, snow water equivalent, etc.). As physical measurements in the field are not always possible you may have to become creative here, e.g.&nbsp;use MODIS snow cover data to validate the snow/no snow partitioning of the HBV model. Also consult the literature for parameterizations of similar catchments.<br>
</li>
</ul>
<ol start="2" type="1">
<li>Use a combination of similarity measures. This will be demonstrated later on in the model calibration section.<br>
</li>
<li>During model calibration, look at the components of the model as well as the total discharge time series. Make sure that the storage of water changes within reasonable bounds and that the partitioning of the water in your system is physically reasonable (e.g.&nbsp;comparatively small storage compartments for rocky mountain catchments).<br>
</li>
<li>Exclude part of your data set from model calibration and use it for model validation. If the model does not perform well in the validation period, its parameters are too specific for the calibration period (you have over-fitted the model) and the model is said to not generalize well. If this happens you should try to reduce the number of parameters in your model. To understand better which parameters are responsible for the over-fit of the historical discharge, use different calibration and validation periods and compare the resulting parameters. Through sensitivity analysis, identify the model components that are most sensitive to predicted changes of model forcings, geometry or parameterization and perform scenario analysis.<br>
</li>
<li>Implement and validate multiple possible conceptual models. All of the models must be calibrated and validated individually. It is further recommended to calculate at the highest possible temporal resolution and to try and compare the model outcome at different spatial resolution.<br>
</li>
<li>Square-root filters or data assimilation algorithms are able to account for non-correlated measurement errors (they are not implemented in RSMinerve and not topic of this course). Error bands for the measurements should be adapted when communicating model results.</li>
</ol>
<p>Most of the above points will be discussed in more detail during this course.</p>
</section><section id="exercise-calibrate-a-simple-hbv-model-sec-appendix-solutions-calibrated-parameters-.unnumbered" class="level3" data-number="D.2.1"><h3 data-number="D.2.1" class="anchored" data-anchor-id="exercise-calibrate-a-simple-hbv-model-sec-appendix-solutions-calibrated-parameters-.unnumbered">
<span class="header-section-number">D.2.1</span> Exercise: Calibrate a Simple HBV Model {#sec-appendix-solutions-calibrated parameters .unnumbered}</h3>
<p>The parameter set of the calibrated model are: ::: {.cell} ::: {.cell-output .cell-output-stdout}</p>
<pre><code>

|                |      |
|:---------------|-----:|
|CFMax (mm/°C/d) |  0.50|
|CFR (-)         |  0.05|
|CWH (-)         |  0.10|
|TT (°C)         |  3.00|
|TTInt (°C)      |  3.00|
|TTSM (°C)       |  0.00|
|Beta (-)        |  2.50|
|FC (mm)         | 20.00|
|PWP (-)         |  0.50|
|SUMax (mm)      | 10.00|
|Kr (1/d)        |  0.09|
|Ku (1/d)        |  0.02|
|Kl (1/d)        |  0.00|
|Kperc (1/d)     |  0.00|</code></pre>
<p>::: :::</p>
<p>You can import the calibrated parameters via Import P in the Model Properties toolbar (note that the calibrated parameters are available for download <a href="https://www.dropbox.com/s/6512a22h2lrga7p/nauvalisoy_PAR_calibrated.txt?dl=1">here</a>.</p>


</section></section></main><!-- /main --><script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    setTimeout(function() {
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./appendix_c_quick_guides.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Quick Guides</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>