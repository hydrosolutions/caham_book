<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="2024.Q1 Edition hydrosolutions GmbH">
<title>Modeling of Hydrological Systems in Semi-Arid Central Asia - 3&nbsp; Sources of Relevant Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./discharge_station_data.html" rel="next">
<link href="./data.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link href="site_libs/vembedr-0.1.5/css/vembedr.css" rel="stylesheet">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data.html">Part II: Data Sources, Retrieval and Preparation</a></li><li class="breadcrumb-item"><a href="./data_sources.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Sources of Relevant Data</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Modeling of Hydrological Systems in Semi-Arid Central Asia</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/hydrosolutions/caham_book" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
</div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About This Book</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface to the 2024.Q1 Edition</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./study_guide_materials.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Study Guide and Materials</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./hydrology_of_central_asia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part I: Hydrology of Semi-Arid Central Asia</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hydrological_systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Hydrological Systems in Semi-Arid Central Asia</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./example_river_basins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Case Study River Basins</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part II: Data Sources, Retrieval and Preparation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_sources.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Sources of Relevant Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discharge_station_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Discharge Station Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./geospatial_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Geospatial Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./snow_and_glacier_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Snow and Glacier Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./climate_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Climate Data</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./hydrological_modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part III: Hydrological Modeling &amp; Applications</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hydraulic_hydrological_modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Hydrological-Hydraulic Modeling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./long_term_water_balance_modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Long-term Water Balance Modeling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./modeling_using_predictive_inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Modeling Using Predictive Inference</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glacier_modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Modeling of Discharge from Glacier Melt</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Climate_change_impact_study.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Quantification of Climate Change Impacts</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix_a_free_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Software</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix_b_riverscentralasia_r_toolbox.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">R Toolbox riversCentralAsia</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix_c_quick_guides.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Quick Guides</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix_d_exercise_solutions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Exercise Solutions</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#sec-discharge-gauge-location" id="toc-sec-discharge-gauge-location" class="nav-link active" data-scroll-target="#sec-discharge-gauge-location"><span class="header-section-number">3.1</span> Gauge Location &amp; Norm Discharge Data</a></li>
  <li><a href="#sec-vector-data-sources" id="toc-sec-vector-data-sources" class="nav-link" data-scroll-target="#sec-vector-data-sources"><span class="header-section-number">3.2</span> Vector data</a></li>
  <li><a href="#sec-raster-data-sources" id="toc-sec-raster-data-sources" class="nav-link" data-scroll-target="#sec-raster-data-sources"><span class="header-section-number">3.3</span> Raster Data</a></li>
  <li><a href="#sec-data-sources-references" id="toc-sec-data-sources-references" class="nav-link" data-scroll-target="#sec-data-sources-references"><span class="header-section-number">3.4</span> References</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/hydrosolutions/caham_book/edit/master/data_sources.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data.html">Part II: Data Sources, Retrieval and Preparation</a></li><li class="breadcrumb-item"><a href="./data_sources.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Sources of Relevant Data</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-data-sources" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Sources of Relevant Data</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p>This Chapter provides a broad overview of relevant available data sources. All these data can be accessed via download from the web free of charge except where otherwise mentioned.</p>
<p>The Chapters <a href="discharge_station_data.html" class="quarto-xref"><span>Chapter 4</span></a>, <a href="geospatial_data.html" class="quarto-xref"><span>Chapter 5</span></a>, <a href="snow_and_glacier_data.html" class="quarto-xref"><span>Chapter 6</span></a>, and <a href="climate_data.html" class="quarto-xref"><span>Chapter 7</span></a> describe in detail how these data can be prepared for hydrological modeling with RSMinerve. Before this, the following <a href="#sec-discharge-gauge-location" class="quarto-xref"><span>Section 3.1</span></a> provides an in-depth discussion of the derivation of a consistent set of gauge location data.</p>
<section id="sec-discharge-gauge-location" class="level2" data-number="3.1"><h2 data-number="3.1" class="anchored" data-anchor-id="sec-discharge-gauge-location">
<span class="header-section-number">3.1</span> Gauge Location &amp; Norm Discharge Data</h2>
<p>The Central Asia Hydrometeorological Organizations are the organizations administering discharge data. Unfortunately, the organizations do not have a good understanding of most of the past and current locations where they monitor this discharge. This can be verified by checking the website <a href="https://www.arcgis.com/apps/Cascade/index.html?appid=ac03200e7b834193938d95c38b58a15b" target="_blank">Hydrometeorological Services in Central Asia</a> where many of the shown gauges are not correctly georeferenced.</p>
<p>This is problematic for many reasons, especially for GIS analysis and hydrological modeling. With a focus on the mountain rivers, we developed a workflow to verify gauge locations communicated by Hydrometeorological Organizations in a consistent and comprehensive manner. With the goal of establishing a comprehensive archive, this workflow was applied to map operational stations and past stations.</p>
<p>First, data from all existing gauges and locations were entered into a data frame with the following attributes:</p>
<ul>
<li>
<strong>CODE</strong>: Official gauge code in use</li>
<li>
<strong>EASTING</strong> and <strong>NORTHING</strong>: Coordinates in UTM42N</li>
<li>
<strong>LON</strong> and <strong>LAT</strong>: Longitude and latitude</li>
<li>
<strong>NAME_ENG</strong>: Translated English station name</li>
<li>
<strong>NAME_RU</strong>: Original station name</li>
<li>
<strong>RIVER</strong>: Name of river</li>
<li>
<strong>BASIN</strong>: Name of the larger basin</li>
<li>
<strong>COUNTRY</strong>: The country the gauge is located in</li>
<li>
<strong>Q_NORM_M3S</strong>: Long-term norm discharge</li>
<li>
<strong>OBS_PERIOD</strong>: Observation period of long-term norm discharge</li>
<li>
<strong>SOURCE</strong>: Source of information on norm discharge</li>
</ul>
<p>Second, data on historic stations were obtained from the Soviet compendia Surface Water Resources, Vol 14 Issues 1 and 3. Third, data from northern Afghan rivers’ stream flow characteristics and the location of gauging stations there were obtained from <span class="citation" data-cites="usgs_529_2010">(<a href="#ref-usgs_529_2010" role="doc-biblioref">Olson and Williams-Sether 2010</a>)</span>. Norm discharge was calculated from the available data.</p>
<p>All stations were manually located in a Geographic Information System (GIS) using the relevant Soviet Military Topographic maps (1:200’000) from the corresponding region. The maps were downloaded from <a href="https://maps.vlasenko.net" class="uri">https://maps.vlasenko.net</a> and subsequently georeferenced in QGIS with the <code>Raster/Georeferencr</code> tool there <span class="citation" data-cites="QGIS_software">(<a href="#ref-QGIS_software" role="doc-biblioref">QGIS Development Team 2021</a>)</span>. Where possible, high-resolution satellite imagery from Microsoft® Bing™ Maps was used to identify measurement bridges and for final validation of the identified locations.</p>
<p>The upstream catchments for each gauge were then mapped in R using the <a href="https://cran.r-project.org/package=whitebox" target="_blank">WhiteboxTools v.2.0.0</a>. Like this, we have compiled a list of 297 gauges with their contributing catchments. <a href="#fig-ca-gauges-basin" class="quarto-xref">Figure&nbsp;<span>3.1</span></a> shows the result. For more information, please see <span class="citation" data-cites="marti2023">(<a href="#ref-marti2023" role="doc-biblioref">Marti et al. 2023</a>)</span>.</p>
<div id="fig-ca-gauges-basin" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-ca-gauges-basin-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/data/gauges_basin.jpg" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ca-gauges-basin-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.1: Geographic overview over mapped basins. The pastel colors encode the mountainous catchments of the corresponding large basins. See <span class="citation" data-cites="siegfried_unveiling_2023">Siegfried et al. (<a href="#ref-siegfried_unveiling_2023" role="doc-biblioref">2023</a>)</span> for more information.
</figcaption></figure>
</div>
<p>For all basins, mean statistics were computed from the digital elevation model, the land cover data, climatological and glacier data, as well as from 1979 through 2012 for mean average monthly temperature and precipitation, and finally, the monthly snow cover fraction derived from MODIS Terra and Aqua Snow Cover Data Product which is available from 2001 through the end of 2021.</p>
<p>The norm discharge data presented here are used for the long-term water balance modeling presented in <a href="long_term_water_balance_modeling.html" class="quarto-xref"><span>Chapter 9</span></a> in Part III of the book. For selected stations and river basins, we have time series available that can be used to calibrate time-dependent models. Some of these data and their processing will be presented and discussed in <a href="discharge_station_data.html" class="quarto-xref"><span>Chapter 4</span></a>.</p>
</section><section id="sec-vector-data-sources" class="level2" data-number="3.2"><h2 data-number="3.2" class="anchored" data-anchor-id="sec-vector-data-sources">
<span class="header-section-number">3.2</span> Vector data</h2>
<p>For our purpose, we define the area of interest (AOI) as 55 deg. E - 85. deg. E and 30 deg. N - 50 deg. N..</p>
<p>Global political boundaries can be obtained from the Global Administrative Divisions database at <a href="www.gadm.org" target="_blank">gadm.org</a>. Except for Turkmenistan, data on first (Oblast) and second-level (Rayon) administrative divisions is available for all Central Asian states.</p>
<p>Shapefiles of large river basins can be retrieved from the <a href="https://www.bafg.de/GRDC/EN/01_GRDC/grdc_node.html" target="_blank">Global Runoff Data Center</a>. Note that for the Central Asian region, the flat downstream areas of these basins are delineating natural hydrological borders. They do not account for man-made inter-basin transfers and thus would need to be corrected where necessary.</p>
<p>The river network can be obtained from the Global Runoff Data Center WMOBB data that was released in 2021. It can be downloaded via this <a href="https://www.bafg.de/SharedDocs/ExterneLinks/GRDC/wmobb_shp_zip.html?nn=201274" target="_blank">link</a>. With 161 MB, approx., data covering the whole globe can be downloaded in a straightforward manner. The global data can be clipped easily with the bounding box defined above.</p>
<p>Data for the large rivers can be extracted from the layer wmobb_rivnets_Q09_10 (containing line sections representing an upland area above 4’504 km<sup>2</sup>). The layer called wmobb_rivnets_Q08_09 contains line sections representing an upland area between 1’150 km<sup>2</sup> and 4’504 km<sup>2</sup> and, finally, the wmobb_rivnets_Q07_08 (containing line sections representing an upland area above between 487 and 1’150 km<sup>2</sup>) <span class="citation" data-cites="grdc_2020">(<a href="#ref-grdc_2020" role="doc-biblioref">GRDC, Koblenz, Germany: Federal Institute of Hydrology (BfG). 2020</a>)</span>. Smaller rivers can be further added to a QGIS project on a case-per-case basis using the additional data sets in the files obtained from GRDC.</p>
<p>Permanent water bodies and courses can be obtained from the global HydroLakes Database <span class="citation" data-cites="hydrolakes_2016">(<a href="#ref-hydrolakes_2016" role="doc-biblioref">Messager et al. 2016</a>)</span>. It can be downloaded via this <a href="https://www.hydrosheds.org/pages/hydrolakes" target="_blank">link</a>.</p>
<p>Glacier data can be taken from the Randolph Glacier Inventory (RGI) 6.0. The inventory contains a global archive of glacier outlines and can be obtained via this <a href="https://www.glims.org/RGI/" target="_blank">website</a>. Information from 16’617 glaciers is available in the AOI. The corresponding data on glacier thickness and glacier thinning rates is available as complementary data <span class="citation" data-cites="farinotti_consensus_2019">Hugonnet et al. (<a href="#ref-hugonnet_accelerated_2021" role="doc-biblioref">2021</a>)</span>. More information on these data can be found in <a href="snow_and_glacier_data.html" class="quarto-xref"><span>Chapter 6</span></a>, whereas glacier models are discussed in a separate <a href="#sec-glacier-models">Section</a> in the Chapter on <a href="hydrological_modeling.html">Hydrological Modeling</a>.</p>
<p>Data on dams is available from the GOODD data set. Information from 88 dams in the region of interest is mapped <span class="citation" data-cites="goodd_2020">(<a href="#ref-goodd_2020" role="doc-biblioref">Mulligan, Soesbergen, and Sáenz 2020</a>)</span>. The data is available from <a href="http://globaldamwatch.org/goodd/" target="_blank">Global Dams Watch</a>.</p>
</section><section id="sec-raster-data-sources" class="level2" data-number="3.3"><h2 data-number="3.3" class="anchored" data-anchor-id="sec-raster-data-sources">
<span class="header-section-number">3.3</span> Raster Data</h2>
<p>The NASA SRTM digital elevation model 1 Arc-second (30 m) global product is used as a DEM <span class="citation" data-cites="srtm_2020">(<a href="#ref-srtm_2020" role="doc-biblioref"><span>“NASA Shuttle Radar Topography Mission (SRTM)”</span> 2013</a>)</span>. There are many ways to access these data, some more, some less convenient. An easy way to access these data is in QGIS by using the <a href="https://github.com/hdus/SRTM-Downloader" target="_blank">SRTM-Downloader Plugin</a>. For web-based access, it is recommended to utilize the <a href="https://earthexplorer.usgs.gov" target="_blank">NASA EarthExplorer</a>. Sample instructions on how to download DEM data from the EarthExplorer can, for example, be found by watching the following YouTube tutorial.</p>
<div class="cell">
<div class="cell-output-display">
<div class="vembedr">
<div>
<iframe src="https://www.youtube.com/embed/0YPFegTcL4w?start=248" width="533" height="300" frameborder="0" allowfullscreen="" data-external="1"></iframe>
</div>
</div>
</div>
</div>
<p>Land cover information can be obtained from the Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe data <span class="citation" data-cites="copernicus_landcover_2019">(<a href="#ref-copernicus_landcover_2019" role="doc-biblioref">Buchhorn et al. 2019</a>)</span>. The <a href="https://lcviewer.vito.be/2015">Global Land Cover Viewer</a> allows to access, view and download annual land cover data from 2015 - 2019.</p>
<p>High-resolution climate data can be obtained from the Climatologies at High Resolution for the Earth’s Land Surface Areas (CHELSA) dataset via <a href="https://chelsa-climate.org" target="_blank">www.chelsa-climate.org</a>. For the Version 2.1 product, climatologies for the periods 1981 - 2010, 2011 - 2040, 2041 - 2070, and 2071 - 2100 for a large number of variables are available for <a href="https://envicloud.wsl.ch/#/?prefix=chelsa%2Fchelsa_V2%2FGLOBAL%2F" target="_blank">download as GeoTiff-files</a>. With regard to the daily data, it is recommended to use the <a href="https://chelsa-climate.org/daily-precipitation/" target="_blank">Global daily 1km land surface precipitation based on cloud cover-informed downscaling</a>. This precipitation product reflects actual conditions in High-Mountain Asia in a much better way than the precipitation from the CHELSA-W5E5 V1.1 product. For daily temperature, the data from the CHELSA-W5E5 V1.1 product can be downloaded for a given domain of interest via this <a href="https://data.isimip.org/10.48364/ISIMIP.836809" target="_blank">link</a>.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that the daily high-resolution climate fields for the entire Central Asia domain require a lot of storage space. Their processing for later analysis is computationally intensive.</p>
</div>
</div>
<p>The FLO1K, global maps of mean, maximum and minimum annual stream flow at 1 km resolution from 1960 through 2015 can be retrieved from this <a href="https://figshare.com/collections/FLO1K_global_maps_of_mean_maximum_and_minimum_annual_streamflow_at_1_km_resolution_from_1960_through_2015/3890224" target="_blank">web,site</a>. FLO1K delivers relevant data for water resources analyses at a global scale and yet high spatial resolution <span class="citation" data-cites="barbarossa_2018">(<a href="#ref-barbarossa_2018" role="doc-biblioref">Barbarossa et al. 2018</a>)</span>. These data can be helpful for long-term water balance assessments and for studying the hydropower potential in the high mountain regions where flow measurements are sparse.</p>
<p>The CHELSA V21 global daily high-resolution climatology, available from 01-01-1979 until 31-12-2011 was processed over the Central Asia domain to map climate trends, including on temperature, precipitation, and snow fraction. The data is available upon request from this site: https://chelsa-climate.org <span class="citation" data-cites="karger_2017">Karger et al. (<a href="#ref-karger_2021" role="doc-biblioref">2021</a>)</span>. The CHELSA V21 product is corrected for snow undercatch in the high elevation ranges and thus can represent better actual high mountain precipitation than other available global climatologies <span class="citation" data-cites="beck_2020">(<a href="#ref-beck_2020" role="doc-biblioref">Beck et al. 2020</a>)</span>. The aridity index (AI) fields were taken from the bio-climate CHELSA V21 data set and compared with the CGIAR AI product <span class="citation" data-cites="trabucco_2019">(<a href="#ref-trabucco_2019" role="doc-biblioref">Trabucco and Zomer 2019</a>)</span>. Data on an additional 70 bio-climatic indicators were downloaded from the CHELSA V21 1980 - 2010 climatology, and statistics were extracted for each gauged catchment, together with the AI.</p>
<p>High-resolution crop disaggregated irrigated areas were mapped over the entire Central Asia domain by <a href="www.hydrosolutions.ch" target="_blank">hydrosolutions GmbH</a> (see also <span class="citation" data-cites="ragettli_2018">(<a href="#ref-ragettli_2018" role="doc-biblioref">Ragettli, Herberz, and Siegfried 2018</a>)</span> for more information). Like this, 30 m crop maps were produced with Google Earth Engine using unsupervised classification for 2016 - 2020. These maps, in conjunction with estimates of irrigation water intake volumes and estimates of actual evapotranspiration help in irrigation scheme performance assessments. In hydrological modeling, these data can be used to introduce sectoral consumption estimates and help develop sound and effective basin planning.</p>
</section><section id="sec-data-sources-references" class="level2" data-number="3.4"><h2 data-number="3.4" class="anchored" data-anchor-id="sec-data-sources-references">
<span class="header-section-number">3.4</span> References</h2>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-barbarossa_2018" class="csl-entry" role="listitem">
Barbarossa, Valerio, Mark A. J. Huijbregts, Arthur H. W. Beusen, Hylke E. Beck, Henry King, and Aafke M. Schipper. 2018. <span>“FLO1K, Global Maps of Mean, Maximum and Minimum Annual Streamflow at 1 Km Resolution from 1960 Through 2015.”</span> <em>Scientific Data</em> 5 (1): 180052. <a href="https://doi.org/10.1038/sdata.2018.52">https://doi.org/10.1038/sdata.2018.52</a>.
</div>
<div id="ref-beck_2020" class="csl-entry" role="listitem">
Beck, Hylke E., Eric F. Wood, Tim R. McVicar, Mauricio Zambrano-Bigiarini, Camila Alvarez-Garreton, Oscar M. Baez-Villanueva, Justin Sheffield, and Dirk N. Karger. 2020. <span>“Bias Correction of Global High-Resolution Precipitation Climatologies Using Streamflow Observations from 9372 Catchments.”</span> <em>Journal of Climate</em> 33 (4): 1299–1315. <a href="https://doi.org/10.1175/JCLI-D-19-0332.1">https://doi.org/10.1175/JCLI-D-19-0332.1</a>.
</div>
<div id="ref-copernicus_landcover_2019" class="csl-entry" role="listitem">
Buchhorn, M., B. Smets, L. Bertels, B. De Roo, M. Lesiv, N. E. Tsendbazar, M. Herold, and S. Fritz. 2019. <span>“Copernicus Global Land Service: Land Cover 100m: Collection 3: Epoch 2019: Globe.”</span>
</div>
<div id="ref-farinotti_consensus_2019" class="csl-entry" role="listitem">
Farinotti, Daniel, Matthias Huss, Johannes J. Fürst, Johannes Landmann, Horst Machguth, Fabien Maussion, and Ankur Pandit. 2019. <span>“A Consensus Estimate for the Ice Thickness Distribution of All Glaciers on <span>Earth</span>.”</span> <em>Nature Geoscience</em> 12 (3): 168–73. <a href="https://doi.org/10.1038/s41561-019-0300-3">https://doi.org/10.1038/s41561-019-0300-3</a>.
</div>
<div id="ref-grdc_2020" class="csl-entry" role="listitem">
GRDC, Koblenz, Germany: Federal Institute of Hydrology (BfG). 2020. <span>“Major River Basins of the World / Global Runoff Data Centre, GRDC. 2nd, Rev. Ext. Ed.”</span> Shape.
</div>
<div id="ref-hugonnet_accelerated_2021" class="csl-entry" role="listitem">
Hugonnet, Romain, Robert McNabb, Etienne Berthier, Brian Menounos, Christopher Nuth, Luc Girod, Daniel Farinotti, et al. 2021. <span>“Accelerated Global Glacier Mass Loss in the Early Twenty-First Century.”</span> <em>Nature</em> 592 (7856): 726–31. <a href="https://doi.org/10.1038/s41586-021-03436-z">https://doi.org/10.1038/s41586-021-03436-z</a>.
</div>
<div id="ref-karger_2017" class="csl-entry" role="listitem">
Karger, Dirk Nikolaus, Olaf Conrad, Jürgen Böhner, Tobias Kawohl, Holger Kreft, Rodrigo Wilber Soria-Auza, Niklaus E. Zimmermann, H. Peter Linder, and Michael Kessler. 2017. <span>“<span class="nocase">Climatologies at high resolution for the earth’s land surface areas</span>.”</span> <em>Scientific Data</em> 4 (1): 170122. <a href="https://doi.org/10.1038/sdata.2017.122">https://doi.org/10.1038/sdata.2017.122</a>.
</div>
<div id="ref-karger_2020" class="csl-entry" role="listitem">
Karger, Dirk Nikolaus, Dirk R. Schmatz, Gabriel Dettling, and Niklaus E. Zimmermann. 2020. <span>“<span class="nocase">High-resolution monthly precipitation and temperature time series from 2006 to 2100</span>.”</span> <em>Scientific Data</em> 7 (1): 248. <a href="https://doi.org/10.1038/s41597-020-00587-y">https://doi.org/10.1038/s41597-020-00587-y</a>.
</div>
<div id="ref-karger_2021" class="csl-entry" role="listitem">
Karger, Dirk Nikolaus, Adam M. Wilson, Colin Mahony, Niklaus E. Zimmermann, and Walter Jetz. 2021. <span>“<span class="nocase">Global daily 1 km land surface precipitation based on cloud cover-informed downscaling</span>.”</span> <em>Scientific Data</em> 8 (1): 307. <a href="https://doi.org/10.1038/s41597-021-01084-6">https://doi.org/10.1038/s41597-021-01084-6</a>.
</div>
<div id="ref-marti2023" class="csl-entry" role="listitem">
Marti, Beatrice, Andrey Yakovlev, Dirk Nikolaus Karger, Silvan Ragettli, Aidar Zhumabaev, Abdul Wakil Wakil, and Tobias Siegfried. 2023. <span>“CA-Discharge: Geo-Located Discharge Time Series for Mountainous Rivers in Central Asia.”</span> <em>Scientific Data</em> 10 (1): 579. <a href="https://doi.org/10.1038/s41597-023-02474-8">https://doi.org/10.1038/s41597-023-02474-8</a>.
</div>
<div id="ref-hydrolakes_2016" class="csl-entry" role="listitem">
Messager, M. L., B. Lehner, Grill G., I. Nedeva, and O. Schmitt. 2016. <span>“Estimating the Volume and Age of Water Stored in Global Lakes Using a Geo-Statistical Approach.”</span> <em>Nature Communications</em> 13603.
</div>
<div id="ref-goodd_2020" class="csl-entry" role="listitem">
Mulligan, Mark, Arnout van Soesbergen, and Leonardo Sáenz. 2020. <span>“GOODD, a Global Dataset of More Than 38,000 Georeferenced Dams.”</span> <em>Scientific Data</em> 7 (1): 31. <a href="https://doi.org/10.1038/s41597-020-0362-5">https://doi.org/10.1038/s41597-020-0362-5</a>.
</div>
<div id="ref-srtm_2020" class="csl-entry" role="listitem">
<span>“NASA Shuttle Radar Topography Mission (SRTM).”</span> 2013. NASA. <a href="https://earthdata.nasa.gov/learn/articles/nasa-shuttle-radar-topography-mission-srtm-version-3-0-global-1-arc-second-data-released-over-asia-and-australia">https://earthdata.nasa.gov/learn/articles/nasa-shuttle-radar-topography-mission-srtm-version-3-0-global-1-arc-second-data-released-over-asia-and-australia</a>.
</div>
<div id="ref-usgs_529_2010" class="csl-entry" role="listitem">
Olson, S. A., and T. Williams-Sether. 2010. <span>“Streamflow Characteristics at Streamgages in Northern Afghanistan and Selected Locations.”</span> U.S. Geological Survey Data Series 529. USGS.
</div>
<div id="ref-QGIS_software" class="csl-entry" role="listitem">
QGIS Development Team. 2021. <em>QGIS Geographic Information System</em>. QGIS Association.
</div>
<div id="ref-ragettli_2018" class="csl-entry" role="listitem">
Ragettli, Silvan, Timo Herberz, and Tobias Siegfried. 2018. <span>“<span class="nocase">An Unsupervised Classification Algorithm for Multi- Temporal Irrigated Area Mapping in Central Asia</span>.”</span> <em>Remote Sensing</em> 10 (11): 1823. <a href="https://doi.org/10.3390/rs10111823">https://doi.org/10.3390/rs10111823</a>.
</div>
<div id="ref-siegfried_unveiling_2023" class="csl-entry" role="listitem">
Siegfried, Tobias, Aziz Ul Haq Mujahid, Beatrice Marti, Peter Molnar, Dirk Nikolaus Karger, and Andrey Yakovlev. 2023. <span>“Unveiling the <span>Future</span> <span>Water</span> <span>Pulse</span> of <span>Central</span> <span>Asia</span>: <span>A</span> <span>Comprehensive</span> 21st <span>Century</span> <span>Hydrological</span> <span>Forecast</span> from <span>Stochastic</span> <span>Water</span> <span>Balance</span> <span>Modeling</span>.”</span> https://doi.org/<a href="https://doi.org/10.21203/rs.3.rs-3611140/v1">https://doi.org/10.21203/rs.3.rs-3611140/v1</a>.
</div>
<div id="ref-trabucco_2019" class="csl-entry" role="listitem">
Trabucco, Antonio, and Robert Zomer. 2019. <span>“<span class="nocase">Global Aridity Index and Potential Evapotranspiration (ET0) Climate Database v2</span>,”</span> January. <a href="https://doi.org/10.6084/m9.figshare.7504448.v3">https://doi.org/10.6084/m9.figshare.7504448.v3</a>.
</div>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./data.html" class="pagination-link  aria-label=" part="" ii:="" data="" sources="" retrieval="" and="" preparation="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Part II: Data Sources, Retrieval and Preparation</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./discharge_station_data.html" class="pagination-link" aria-label="<span class='chapter-number'>4</span>&nbsp; <span class='chapter-title'>Discharge Station Data</span>">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Discharge Station Data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/hydrosolutions/caham_book/edit/master/data_sources.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></div></div></footer></body></html>