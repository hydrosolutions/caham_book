<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.424">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="2022 release">
<title>Modeling of Hydrological Systems in Semi-Arid Central Asia - 5&nbsp; Geospatial Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./snow_and_glacier_data.html" rel="next">
<link href="./discharge_station_data.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link href="site_libs/vembedr-0.1.5/css/vembedr.css" rel="stylesheet">
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data.html">Part II: Data Sources, Retrieval and Preparation</a></li><li class="breadcrumb-item"><a href="./geospatial_data.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Geospatial Data</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Modeling of Hydrological Systems in Semi-Arid Central Asia</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/hydrosolutions/caham_book" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
</div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./study_guide_materials.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Study Guide and Materials</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./hydrology_of_central_asia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part I: Hydrology of Semi-Arid Central Asia</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hydrological_systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Hydrological Systems in Semi-Arid Central Asia</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./example_river_basins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Case Study River Basins</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part II: Data Sources, Retrieval and Preparation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_sources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Sources of Relevant Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discharge_station_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Discharge Station Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./geospatial_data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Geospatial Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./snow_and_glacier_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Snow and Glacier Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./climate_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Climate Data</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./hydrological_modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part III: Hydrological Modeling &amp; Applications</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hydraulic_hydrological_modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Hydrological-Hydraulic Modeling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./long_term_water_balance_modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Long-term Water Balance Modeling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./modeling_using_predictive_inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Modeling Using Predictive Inference</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glacier_modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Modeling of Discharge from Glacier Melt</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./real_world_examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Real World Hydrological Model Applications</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix_a_free_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Software</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix_b_riverscentralasia_r_toolbox.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">R Toolbox riversCentralAsia</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix_c_quick_guides.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Quick Guides</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix_d_exercise_solutions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Exercise Solutions</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#sec-geospatial-data-prerequisites" id="toc-sec-geospatial-data-prerequisites" class="nav-link active" data-scroll-target="#sec-geospatial-data-prerequisites"><span class="header-section-number">5.1</span> Geospatial Data Prerequisites</a></li>
  <li><a href="#sec-catchment-delineation" id="toc-sec-catchment-delineation" class="nav-link" data-scroll-target="#sec-catchment-delineation"><span class="header-section-number">5.2</span> Catchment Delineation</a></li>
  <li><a href="#sec-preparation-of-rsminerve-input-files" id="toc-sec-preparation-of-rsminerve-input-files" class="nav-link" data-scroll-target="#sec-preparation-of-rsminerve-input-files"><span class="header-section-number">5.3</span> Preparation of RSMinerve Input files</a></li>
  <li>
<a href="#sec-post-processing-results-shapefiles" id="toc-sec-post-processing-results-shapefiles" class="nav-link" data-scroll-target="#sec-post-processing-results-shapefiles"><span class="header-section-number">5.4</span> Post-Processing Results Shapefiles</a>
  <ul class="collapse">
<li><a href="#sec_junctions_and_rivers_layer" id="toc-sec_junctions_and_rivers_layer" class="nav-link" data-scroll-target="#sec_junctions_and_rivers_layer"><span class="header-section-number">5.4.1</span> JUNCTIONS and RIVER Layers</a></li>
  <li><a href="#sec-subbasins-layer" id="toc-sec-subbasins-layer" class="nav-link" data-scroll-target="#sec-subbasins-layer"><span class="header-section-number">5.4.2</span> SUBBASINS Layer</a></li>
  </ul>
</li>
  <li><a href="#sec-geospatial-data-references" id="toc-sec-geospatial-data-references" class="nav-link" data-scroll-target="#sec-geospatial-data-references"><span class="header-section-number">5.5</span> References</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/hydrosolutions/caham_book/edit/master/geospatial_data.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data.html">Part II: Data Sources, Retrieval and Preparation</a></li><li class="breadcrumb-item"><a href="./geospatial_data.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Geospatial Data</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-geospatial-data" class="quarto-section-identifier"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Geospatial Data</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p>This Section follows the steps shown in <a href="data.html#fig-climate-impact-model-chain" class="quarto-xref">Figure&nbsp;<span>1</span></a> for geospatial data and explains in a hands-on manner how to arrive at and process the required data for later inclusion in the hydrological-hydraulic model RSMinerve.</p>
<p>Why bother to first derive the catchment shape of a basin under consideration, it’s subbasins, its rivers and junctions? While it is true that we do not need to take this detour in RSMinerve and can start to assemble the model components piece by piece by hand, such an approach quickly gets very tedious and labour intensive. Imageine, for a moment a large watershed such as the Gunt River basin which covers a total area of more than 13’000 km<sup>2</sup> over an elevation range of 4’000 meters [m], approximately. If we were to decide on manually entering information of 20 elevation bands that act as hydrological response units for each of the four subbasin, the task quickly becomes unmanageable.</p>
<p>This is where the automatic derivation of the model structure from GIS shapefiles comes in handy and can greatly make our lives easier. This is why we are focusing on the prepartion of these layers as shown in the <a href="#fig-required-gis-input-files-data" class="quarto-xref">Figure&nbsp;<span>5.1</span></a> in this Section. The requirements for GIS layers for import in RSMinerve are summarized in the Figure which shows the concept for a small, stylized catchment with 4 subbasins that each contributes to flow generation without further subdivisions, e.g.&nbsp;into elevation bands.</p>
<div id="fig-required-gis-input-files-data" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-required-gis-input-files-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/02_required_GIS_Input_Files.png" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-required-gis-input-files-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.1: Required GIS input files for RS Minerve. See corresponding user manual for more information.
</figcaption></figure>
</div>
<p>RSMinerve connects subbasins to junctions via the corresponding naming of the shapefile fields . River stretches run from upstream junction to downstream junction. Consistent naming of rivers and junctions need to be ensured in order to import correctly the shapefiles in RSMinerve.</p>
<p>In this Chapter we will demonstrate how to derive such GIS layers for a demonstration catchment. First, the data prerequisties are quickly introduced. Second, it is demonstrated how the reader can delineate the outlines of a catchment that contributes to discharge at the location of a given discharge station. Third, a QGIS <strong>Graphical Modeler</strong> model that we have prepared for the students takes the DEM, the delineated basin shapefile and the gauge point shapefile to compute subbasins, junctions and rivers.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Go through the steps in this Chapter to generate yourselves the GIS layers of your sample catchment for later import into RSMinerve and processing.</p>
<p>The reader should be aware that the generation of these GIS files is a time consuming and iterative process and requires manual post-processing after their automatic generation. The result, however, will greatly simplify the hydrologial model generation in a next step. Hence, it is important to proerly familiarze yourself will all the neceessary preparatory steps.</p>
</div>
</div>
<section id="sec-geospatial-data-prerequisites" class="level2" data-number="5.1"><h2 data-number="5.1" class="anchored" data-anchor-id="sec-geospatial-data-prerequisites">
<span class="header-section-number">5.1</span> Geospatial Data Prerequisites</h2>
<p>Here, a local installation of QGIS and a basic understanding of Geographic Information Systems are required. Please see <span class="quarto-unresolved-ref">?sec-study-guide-materials</span> for more information how to install QGIS.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="appendix_c_quick_guides.html" class="quarto-xref"><span>Appendix&nbsp;C</span></a> in the Appendix walks you through in detailed manner of many of the required steps in the Chapter. Therefore, please also consult the resources there.</p>
</div>
</div>
<p>There are very many online resources that can be consulted for learning QGIS. You can google them or start with a video tutorial like the following one.</p>
<div class="cell">
<div class="cell-output-display">
<div class="vembedr">
<div>
<iframe src="https://www.youtube.com/embed/NHolzMgaqwE" width="533" height="300" frameborder="0" allowfullscreen="" data-external="1"></iframe>
</div>
</div>
</div>
</div>
<p>To process the data for your case study pack, make sure that you downloaded the corresponding files via this <a href="https://www.dropbox.com/sh/tucg4eno67ndpp0/AADpkSbovUpBx5vhzUJuDquwa?dl=0">link</a>. Depending on the catchment you have chosen, the files are either in the folder ./AMUDARYA, ./CHIRCHIK, ./CHU or ./SYRDAYA.</p>
</section><section id="sec-catchment-delineation" class="level2" data-number="5.2"><h2 data-number="5.2" class="anchored" data-anchor-id="sec-catchment-delineation">
<span class="header-section-number">5.2</span> Catchment Delineation</h2>
<p>Assuming that you have downloaded the catchment data folder of your choice, the corresponding DEM file should be loaded in a new, empty QGIS project. Prior to do this, make sure that the projects projection is in UTM (<a href="appendix_c_quick_guides.html#sec-change-project-projection-qgis">How to change the projection of a project</a>). Check the projection of the DEM layer and reproject it if necessary (<a href="appendix_c_quick_guides.html#sec-quick-guides-verify-projection-reproject">how to</a>).</p>
<p>If you do not have a DEM available to start with, the process of downloading one is straight forward. Probably the easiest way is to install the QGIS SRTM3 plugin (<a href="appendix_c_quick_guides.html#sec-srtm-plugin">how to</a>). An alternative way is to download it via the USGS Earth Explorer (<a href="#sec-earth-explorer-download-srtm">how to</a>). Both solutions requires you to register an Earth Explorer Account (<a href="appendix_c_quick_guides.html#sec-register-with-earth-explorer">how to register</a>). Finally and after downloading the DEM tiles for the region of interest, the tiles need to be merged (<a href="appendix_c_quick_guides.html#sec-merge-srtm-tiles">how to merge DEM tiles</a>).</p>
<p>Typically, geospatial data from open sources is stored in the standard projection WGS84 (EPSG:4326). The WGS84 is in degrees, minutes and seconds but for hydrological analysis it is more convenient to have spatial layers in the UTM projection. Look up in which UTM Zone your catchment lies and re-project to that zone. In the example of the Chirchiq basin, the preferred UTM zone is 42N, i.e.&nbsp;EPSG:32642.</p>
<p>As a next step, we are going to load the shapefile of the discharge gauge station location. This file contains the point location where discharge is measured and from which on we want to delineate the upstream contributing area. The data is stored in the ./GaugeData folder and is called XXXXX_Gauge.shp where the XXXXX are placeholders for the five digit code that uniquely identifies your station. Once the shapefile is loaded, check in <code>Properties/Information</code> that it is correctly projected. If this is not the case, reproject to the relevant UTM zone as described above.</p>
<p>Now, we are ready to start with the catchment delineation.</p>
<p>Instead of just loading the existing catchment shapefile from the corresponding ./Basin folder (<a href="appendix_c_quick_guides.html#sec-add-vector-layer-to-qgis">how to add a vector layer to a QGIS project</a>), it is better to actually go through the steps step-by-step to learning of to derive them. The steps are also described in this online tutorial</p>
<div class="cell">
<div class="cell-output-display">
<div class="vembedr">
<div>
<iframe src="https://www.youtube.com/embed/xwiHQlmEEjw" width="533" height="300" frameborder="0" allowfullscreen="" data-external="1"></iframe>
</div>
</div>
</div>
</div>
<p>To derive the the catchment area upstream of the discharge gauge that we have loaded in the previous step, the DEM is traced upstream until elevation values do not increase any more, i.e.&nbsp;until the boundary of the watershed is reached. The SRTM DEM contains the rounded average elevation in each cell of about 25 - 30 meters [m] resolution. Due to the averaging and rounding it may happen, that in a SRTM DEM, an upstream river cell contains lower elevations than the downstream river cell. If the catchment delineation algorithm reaches such a situation, it stops, thinking it has reached the boundary of the watershed. To avoid this, cells that form local depressions should be filled to form a river bed which is continuously increasing in elevation in the upstream direction until it reaches the watershed boundary.</p>
<p>In QGIS, there are several methods that can fill terrain depressions. We are using the <code>r.fill.dir</code> algorithm to perform this task. <a href="#fig-fill-sinks" class="quarto-xref">Figure&nbsp;<span>5.2</span></a> shows the process in detail. First, we make sure that we have loaded the DEM in the correct projection. Second, we open the Processing Toolbox and type <code>r.fill.dir</code> in the search bar and then double click on the corresponding algorithm. Third, in the openend window, we ensure that the DEM is selected under the <em>Elevation</em> header. On top of that, the <em>Flow Direction</em> and <em>Problem Areas</em> output files are not needed and their checkboxes unchecked.</p>
<div id="fig-fill-sinks" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-fill-sinks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/03_fill_sinks.jpg" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-fill-sinks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.2: Filling sinks in a DEM with the <code>r.fill.dir</code> algorithm.
</figcaption></figure>
</div>
<p>If the algorithm has run, a new entry for the Depressionless DEM will appear in the layers panel with the correct DEM. This raster can now be used to delineate the basin area. The following steps need to be carried out for this;</p>
<ol type="1">
<li>Use the <code>r.watershed</code> algorithm to obtain the flow accumulation and drainage direction rasters.</li>
<li>Ensure that the gauge is correctly located on the DEM</li>
<li>Use the <code>r.water.outlet</code> algorithm to delineate the upstream area</li>
<li>Convert the resulting Basin raster into a polygon via the <code>Conversion/Polygonize</code> method.</li>
</ol>
<p>We show the process in detail here.</p>
<div id="fig-r-watershed-algo" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-r-watershed-algo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/04_r_watershed_algo.jpg" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-r-watershed-algo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.3: Running the <code>r.watershed</code> algorithm. Select the sink-filled DEM, set the minimum size of the exterior watershed to 200’000, check the box in Use positive flow accumulation even for likely underestimation.
</figcaption></figure>
</div>
<p><a href="#fig-r-watershed-algo" class="quarto-xref">Figure&nbsp;<span>5.3</span></a> shows step-by-step how to run the <code>r.watershed</code> algorithm. First, make sure that the Depressionless DEM raster is selected in the <em>Elevation</em> field. Fill in 200’000 as a minimum size of the exterior watershed (this is a guessed number that normally yields good results). Also, check the the box to use positive flow accumulation even for likely underestimates. Finally, just select the top two output files, i.e., <em>Number of cell that drain through each cell</em> and <em>Drainage direction</em>. The remaining resulting rasters are not required during the next steps.</p>
<p>Once you click run, the resulting raster alyers will be computed. As is evident, the flow accumulation raster (called <em>Number of cells that drain through each cell</em>) contains a large range of values. The largest value is obviously in the one cell that drains the largest area of the DEM.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use the raster calculator to compute the logarithm of the flow accumulation raster. This helps to better visualize the raster. This raster can be used to ensure that the gauge from which the upstream area will be delineated are actually correctly located on the streams. If misplacement is evident, we can edit the gauge shapefile and relocate the gauge to the correct river stretch.</p>
</div>
</div>
<p>Once it is ensured that the gauge is correctly located on the stream, we are ready to delieate the upstream area by using the <code>r.water.outlet</code> algorithm. For this, zoom in to display a close up of the gauge and select and open the <code>r.water.outlet</code> window. The algorithm only needs two inputs, i.e.&nbsp;the <em>Drainage direction</em> raster and the coordinates of the outlet point. Instead of manually entering them, you can just click on the mapto select precise point of the gauge location which will transfer the coordinates to the algorithm’s interface. After pressing run, the <em>Basin</em> raster will be computed. <a href="#fig-r-water-outlet" class="quarto-xref">Figure&nbsp;<span>5.4</span></a> shows the process.</p>
<div id="fig-r-water-outlet" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-r-water-outlet-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/05_r_water_outlet.jpg" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-r-water-outlet-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.4: Basin delineation using the <code>r.water.outlet</code> algorithm. The resulting <em>Basin</em> raster can easily be polygonized.
</figcaption></figure>
</div>
<p>As a final step, you should polygonize the <em>Basin</em> raster. We are now ready to run the process model which generates the required shapefiles for further processing in RSMinerve. The resulting vectorized basin can be stored in the corresponding folder on the local computer.</p>
<p>The process can be repeated for any other basin in a similar manner. Note also that in the case you have several gauges to map the upstream areas from, the <em>Flow accumulation</em> as well as the <em>Drainage direction</em> rasters can be computed once, stored, and reused again for all gauges.</p>
<p>We now have all the necessary files to process them in the <strong>Graphical Modeler</strong> model that is provided with the learning pack.</p>
</section><section id="sec-preparation-of-rsminerve-input-files" class="level2" data-number="5.3"><h2 data-number="5.3" class="anchored" data-anchor-id="sec-preparation-of-rsminerve-input-files">
<span class="header-section-number">5.3</span> Preparation of RSMinerve Input files</h2>
<p>You can download the <strong>Graphical Modeler</strong> model from the <a href="https://www.dropbox.com/sh/0fph5jqoc8v2bat/AABfZTl67rqV1BN7H5nZyYx9a?dl=0">Students_CaseStudyPacks online repository</a>. The model file is called <em>rsminerve_gis_files_preparation_2022_win_os.model3</em> and should be downloaded in your local working directory. The model can then be loaded via the Processing/Graphical Modeler menu in QGIS. Once you have loaded the model, you should see the model pop up on your screen as is shown in a similar fashion in <a href="#fig-graphical-modeler" class="quarto-xref">Figure&nbsp;<span>5.5</span></a>. Note that the present version of the model file has been developed under QGIS 3.24 and may not run error-free in a different QGIS release.</p>
<div id="fig-graphical-modeler" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-graphical-modeler-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/06_graphical_modeler.jpg" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-graphical-modeler-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.5: The <strong>Graphical Modeler</strong> model rsminerve_gis_files_preparation_2022_win_os.model3 is shown in a graphical manner in the right window (1). When you click Run, the parameters specification window on the left will pop up (2). See text for further explanations
</figcaption></figure>
</div>
<p><a href="#fig-graphical-modeler" class="quarto-xref">Figure&nbsp;<span>5.5</span></a> shows nothing more than a graphical representation of a script. This script is like a recipie to execute algorithms in QGIS in a sequential manner where an output of one algorithm feeds as input into the next algorithm. The yellow highlighted elements in window (1) are input parameters that are specified in the window (2) prior to the execution of the script. The green elements in the window (1) are the results that are stored during and after the execution of the algorithm and available for further processing then.</p>
<p>As explained above, the <em>rsminerve_gis_files_preparation_2022_win_os.model3</em> model, in a nutshell, prepares input files for RSMinerve using the DEM, the basin shapefile as well as the location of the gauge as input. The key output elements are called SUBBASINS, RIVERS and JUNCTIONS.</p>
<p>Prior to the execution of the model (script), the parameters have to be set in a careful manner. For some of the parameter values, a first best guess might produce outcomes that are not a the required level of detail or, alternatively, too detailed. Depending on the basin under consideration, an iterative approach normally must be followed to arrive at the desired output as is explained in the following.</p>
<p>In <a href="#fig-graphical-modeler-parameters" class="quarto-xref">Figure&nbsp;<span>5.6</span></a>, we show a meaningful parameter selection for the Chatkal River basin in the Case Studies pack (Gauge 16279). The basin and gauge shapefiles as well as the DEM are the geospatial assets that need to be specified are shown in (1), (5) and (4). The following parameters are important to set correctly</p>
<div id="fig-graphical-modeler-parameters" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-graphical-modeler-parameters-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/06_graphical_modeler_parameters.jpg" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-graphical-modeler-parameters-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.6: Parameter selection menu of the <strong>Graphical Modeler</strong> rsminerve_gis_files_preparation_2022_win_os.model3 model. The detailed description of the input elements as well as parameter values chosen is explained in the main text.
</figcaption></figure>
</div>
<ul>
<li>BasinShapeBuffer_meters (2): This is buffer value to be specified in meters. The default value of 500 m is a value that can be used for a wide range of different catchment sizes and does not need to be changed.</li>
<li>Channel Network Cutoff Value (3): This is a crucial parameter for the determination of the subbasin granularity. If many the main basin is to be subdivided into a larger number of subbtains, this value needs to be chosen to be around 10<sup>7</sup> - 10<sup>8</sup>. For Chatkal, as our example shows, a perfect value for the subdivision into the main 4 subbasins is 10<sup>9</sup>.</li>
<li>Elevation Bands Table (4): <a href="#fig-graphical-modeler-elevation-bands-table" class="quarto-xref">Figure&nbsp;<span>5.7</span></a> shows the table than can be customized according to user needs and wants. The table specifies that granuarity with which the basin domain will be subdivided into elevation bands (hydrological response units, i.e.&nbsp;HRUs). As a rule of thumb, in climate change impact studies and for snow melt dominated basins, a spacing of 100 m - 200 m is an optimal choice for use with HBV models in RSMinerve. Note however, the finer the domain is, the larger the number of HRUs will need to be modeled which proportionally increases the computational demand of the hydrological model.</li>
<li>River Network Level (8): Here you set a number between 1 and 8. The lower the number, the higher the number of tributaries and subtributaries that will be delineated for the RIVERS output shapefile. If you choose 8, this means that normally only the river’s main stem will be delineated. This is relevant for the case where not further subdivisions into small subbasins is desired for modeling in RSMinerve. 7 is a robust choice if only the main tributaries should be delineated.</li>
</ul>
<div id="fig-graphical-modeler-elevation-bands-table" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-graphical-modeler-elevation-bands-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/07_graphical_modeler_elevation_bands_table.jpg" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-graphical-modeler-elevation-bands-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.7: The elevation bands table is shown. It shows the user customizable elevation band intervals. The example shows the specification of 9 elevation bands (HRUs) of 500 m spacing between each. For each HRU and for each subbasin, a corrsponding hydrological model will be configured in RSMinerve
</figcaption></figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>You will very likely have to iterate and run the model a couple of times to achieve the desired results. Try it yourself! Note that if you get an error message that POLYGONS.shp was not found, try increasing the Channel Network Cutoff Value by 50 % - 70 %.</p>
</div>
</div>
<p>Sample output results for our demonstration catchment are shown in <a href="#fig-graphical-modeler-results" class="quarto-xref">Figure&nbsp;<span>5.8</span></a>. The resulting layers for this demonstration are available in the <a href="https://www.dropbox.com/sh/5hujg5xc7qf1c3p/AABYrTUs_iFpXaRhJD3qoZ6Ca?dl=0" target="_blank">data pack</a>. We are, however, not quite done yet.</p>
<div id="fig-graphical-modeler-results" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-graphical-modeler-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/08_graphical_modeler_results.jpg" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-graphical-modeler-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.8: Resulting output of the <strong>Graphical Modeler</strong> model for Chatkal River basin. The next step is to clean up manually the SUBBASINS, RIVERS and JUNCTIONS shapefiles.
</figcaption></figure>
</div>
</section><section id="sec-post-processing-results-shapefiles" class="level2" data-number="5.4"><h2 data-number="5.4" class="anchored" data-anchor-id="sec-post-processing-results-shapefiles">
<span class="header-section-number">5.4</span> Post-Processing Results Shapefiles</h2>
<p>As mentioned in the previous Section, we need to post-process the SUBBASINS, RIVERS and JUNCTIONS shapefiles so that they correctly contain the required fields as shown in <a href="#fig-required-gis-input-files-data" class="quarto-xref">Figure&nbsp;<span>5.1</span></a>. A good way to post-process the files is to start with the RIVERS layer, the continue with the JUNCTIONS layer and to end with the SUBBASINS layer.</p>
<section id="sec_junctions_and_rivers_layer" class="level3" data-number="5.4.1"><h3 data-number="5.4.1" class="anchored" data-anchor-id="sec_junctions_and_rivers_layer">
<span class="header-section-number">5.4.1</span> JUNCTIONS and RIVER Layers</h3>
<p>In editing the junctions layer, the basic ideas are to edit the junctions layer in a way to remove junctions that are not needed, given the desired subdivision of the larger basin into subbasins. For the demo catchment shown in <a href="#fig-junctions-editing" class="quarto-xref">Figure&nbsp;<span>5.9</span></a>, the siutation is explained in greater detail.</p>
<div id="fig-junctions-editing" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-junctions-editing-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/09_junctions_editing.jpg" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-junctions-editing-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.9: The Figure shows the output files of the <strong>Graphical Modeler</strong> model. For this demonstration catchment, the only junction that we want to keep (apart from the outflow junction located at the gauge) is the one highlighted with the red arrow which marks the confluence of the two major upstream tributaries.
</figcaption></figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you struggle with shapefile editing, please consult the detailed step-by-step guide as shown in the cooresponding <a href="#appendix-section-graphical-edit-junctions">Quick Guide</a> in the Appendix.</p>
</div>
</div>
<p>Once we have removed the junctions that are not needed, we can very easily also remote the river lines that are not needed. Generally, we do not need river sections above the most upstream junctions for any given subbasin within the river basin or the river basin itself.</p>
<p>If we follow these guides, we end up with the results shown in <a href="#fig-junctions-rivers-final-edits" class="quarto-xref">Figure&nbsp;<span>5.10</span></a>. After editing the attribute tables of these shapefiles, the files are ready for import in RSMinerve.</p>
<div id="fig-junctions-rivers-final-edits" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-junctions-rivers-final-edits-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/10_junctions_rivers_final_edits.jpg" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-junctions-rivers-final-edits-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.10: Final edited shapefiles with the unnecessary junctions and river stretches removed. The two red arrows point to the two remaining junctions and the blue arrow shows the river stretch that is left.
</figcaption></figure>
</div>
<p>What is left now is to ensure that the attribute tables contain the correct fields and that these fields contain the correct labels. <a href="#fig-required-gis-input-files-data" class="quarto-xref">Figure&nbsp;<span>5.1</span></a> shows the required fields. These are</p>
<ul>
<li>JUNCTIONS: Junctions Name (junct_name), Junctions ID (junct_id), Rivers ID (riv_id)</li>
<li>RIVERS: Rivers Name (riv_name), Rivers ID (riv_id), Junctions ID (junct_id)</li>
</ul>
<p>The abbreviated field names are used in QGIS since field names are limited in shapefiles. The fields and values of the final junctions shapefile are shown in <a href="#fig-junctions-attribute-table" class="quarto-xref">Figure&nbsp;<span>5.11</span></a>. Compare this with the edited final attribute table of the rivers shapefile as shown in <a href="#fig-rivers-attribute-table" class="quarto-xref">Figure&nbsp;<span>5.12</span></a>.</p>
<div id="fig-junctions-attribute-table" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-junctions-attribute-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/11_junctions_attribute_table.jpg" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-junctions-attribute-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.11: The final attribute table of the demo junctions shapefile is shown. (1) denotes the fields for the donwstream outlet junction and (2) shows the values for the upstream junction. The naming convention has to be understood in the context of the naming convention using in the RIVERS shapefile
</figcaption></figure>
</div>
<div id="fig-rivers-attribute-table" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-rivers-attribute-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/12_rivers_attribute_table.jpg" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-rivers-attribute-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.12: The final rivers shapefile attribute table is shown with the only river highlighted (1). Very importantly, the junt_id field referes to the <em>downstream junction</em> where the river drains into.
</figcaption></figure>
</div>
</section><section id="sec-subbasins-layer" class="level3" data-number="5.4.2"><h3 data-number="5.4.2" class="anchored" data-anchor-id="sec-subbasins-layer">
<span class="header-section-number">5.4.2</span> SUBBASINS Layer</h3>
<p>Now, we are working on the subbasins. The major subbasins are highlighted in the following <a href="#fig-subbasin-names" class="quarto-xref">Figure&nbsp;<span>5.13</span></a>. We call them Chatkal River downstream, Chatkal River upstream and Sandalash River. These big subbasins can be understood as hydrological response units (HRUs) for hydrological modeling.</p>
<div id="fig-subbasin-names" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-subbasin-names-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/13_subbasins_names.jpg" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-subbasin-names-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.13: The major subbasins of Chatkal River basin above Gauge 16279 are shown. (1) is Chatkal downstream, (2) is Sandalash River and (3) is Chatkal upstream.
</figcaption></figure>
</div>
<p>However, do not forget that we have classified the entire basin into zones of elevation bands. These are shown in the <a href="#fig-subbasin-names" class="quarto-xref">Figure&nbsp;<span>5.13</span></a> as polygons with black outlines from the shapefile layer BasinElevationBands_poly_fixed.shp. Exactly 7 elevation bands (or, in other words, HRUs) were delineated with the <strong>Graphical Modeler</strong> like this. We need to somehow <em>intersect</em> the subbasin HRUs with the elevation bands to generate elevation band HRUs for each subbasin. We will show the steps required to achieve this in the following.</p>
<p>First, we prepare the attribute table of the subbasins shapefile. The way this is done correctly for the demonstration catchment is shown in <a href="#fig-subbasins-attribute-table" class="quarto-xref">Figure&nbsp;<span>5.14</span></a>. The attribute table contains two fields, i.e., basin_name and junct_id. We name the downstream and upstream sections of the Chatkal River with chatkal_ds and chatkal_us correspondingly. The cells of the field junct_id are populated with the name of the corresponding downstream junction where the subbasin drains into. Since both, the subbasin chatkal_us and sandalash drain into the junction upstream_junct, the later appears in both cells of the junct_id field for these rivers.</p>
<div id="fig-subbasins-attribute-table" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-subbasins-attribute-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/14_subbasins_attribute_table.jpg" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-subbasins-attribute-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.14: Subbasins attribute table after adding the required fields and entires as per the requirements of RSMinerve. (1) is for the downstream part of Chatkal River, (2) is for the upstream part of Chatkal River and (3) is for Sandalash River.
</figcaption></figure>
</div>
<p>Second, we clean up and prepare the attribute table for intersecting with the subbasins layer in a thrid step. The attribute table of the layer BasinElevationbands_Poly_fixed contains three fields, i.e., ID, VALUE and NAME from which you can safely delete the ID and VALUE fields. What remains is the NAME field that contains a unique identifier for the elevation bands in ascending order, starting from the lowest. <a href="#fig-elevation-bands-attribute-table" class="quarto-xref">Figure&nbsp;<span>5.15</span></a> shows the attribute table.</p>
<div id="fig-elevation-bands-attribute-table" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-elevation-bands-attribute-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/15_elevation_bands_attribute_table.jpg" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-elevation-bands-attribute-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.15: The attribute table of the elevation bands shapefile is shown after the fields ID and VALUE have been removed (1). When an elevation band is selected in te edit mode, the corresponding geometry is highlighted on the map as is shown by the arrows (2).
</figcaption></figure>
</div>
<p>Third, we need to intersect the elevation bands shapefile with the subbasins shapefile. This can easily be accomplished using the <strong>Vector/Geoprocessing/Intersection</strong> tool in QGIS. When you select the Intersection Algorithm, make sure that you set the elevation bands shapefile as the <strong>Input layer</strong> and set subbasins shapefile as the <strong>Overlay Layer</strong>. When executed, you receive an attribute table that looks as the one shown in <a href="#fig-hru-attribute-table" class="quarto-xref">Figure&nbsp;<span>5.16</span></a>.</p>
<div id="fig-hru-attribute-table" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-hru-attribute-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/16_hru_attribute_table.jpg" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-hru-attribute-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.16: The attribute table resulting from the Intersection Algorithm. You now have to manually add the numbers of the Name field as suffix to the existing names of the basin_name field.
</figcaption></figure>
</div>
<p>As a final step, you have to manually add the numbers stored in the NAME field to the basin names in the field basin_name. Alternatively you can open the field calculator overwrite the basin_name field using the formula: basin_name + ‘_’ + NAME. After this is done, you can safely delete the NAME field and have proudly completed the required steps to setup the GIS shapefiles that can be used as input to the RSMinerve hydrological-hydraulic modeling tool. <a href="#fig-hru-final-attribute-table" class="quarto-xref">Figure&nbsp;<span>5.17</span></a> shows the result.</p>
<div id="fig-hru-final-attribute-table" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-hru-final-attribute-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/17_hru_final_attribute_table.jpg" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-hru-final-attribute-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.17: The final attribute table of the subbasins file is shown. The elevation band identifiers have been added as suffixes with “_x” to the subbasin names where x denotes the number of the subbasin-specific elevation band.
</figcaption></figure>
</div>
<p>Using the tool <strong>Zonal Statistics</strong> from the Processing Toolbox, you can extract the mean elevation for each hydrological response unit. Save the elevation in a field named Z. The resulting GIs layers produced with the above described steps are available in the <a href="https://www.dropbox.com/sh/cuw9v7j0bta7amu/AADgFOJFTZQOceSvOjlx2rc0a?dl=0" target="_blank">data pack</a></p>
<section id="intersecting-with-glacier-outlines" class="level4"><h4 class="anchored" data-anchor-id="intersecting-with-glacier-outlines">Intersecting with glacier outlines</h4>
<p>If glaciers are present in the basin, discharge from glacier melt can be simulated using the GSM model in RS MINERVE. The SUBBASINS layer can be intersected with the glacier outlines from the Randolph Glacier Inventory (RGI) v6.0 data set <a href="#sec-glacier-outlines">see section on glacier outlines</a>. The following step-by-step instructions show how to further process the SUBBASINS layer to for later automated model generation.</p>
<p>In the data pack of the book, you will find a GIS layer named 16279_RGI_Glaciers with the glacier outlines from the Randolph Glacier Inventory (RGI), clipped to the case study basin. The RGI glacier outlines are not always consistent with the basin boundaries derived using the process modeler in QGIS as described above because the two data sets are based on different data sources and spatial resolution. We therefore start out by estimating the glacier area and volume for each of the RGI glaciers in the basin. Open the field calculator in the attribute table of the RGI glaciers layer and estimate the glacier area in <span class="math inline">\(m^2\)</span> for each glacier using the formula <code>$area</code> (see <a href="#fig-glacier_area_field_calculator" class="quarto-xref">Figure&nbsp;<span>5.18</span></a>).</p>
<div id="fig-glacier_area_field_calculator" class="quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-glacier_area_field_calculator-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./images/data/17_0_calculate_glacier_area_in_field_calculator.png" class="img-fluid figure-img">
</div>
<figcaption class="figure quarto-float-caption quarto-float-fig" id="fig-glacier_area_field_calculator-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.18: Calculate the glacier area using the field calculator. Use descriptive output field names and add units where possible (in this example we choose the name <code>Area_m2</code>). Make sure to choose decimal numbers for the output field type
</figcaption></figure>
</div>
<p>You can then use an empirical function to estimate glacier volume in the field calculator; for example following <span class="citation" data-cites="erasov_1968">Erasov (<a href="#ref-erasov_1968" role="doc-biblioref">1968</a>)</span>: <span class="math inline">\(V = 0.027 \cdot A^{1.5}\)</span> with Volume <span class="math inline">\(V\)</span> in <span class="math inline">\(km^3\)</span> and Area <span class="math inline">\(A\)</span> in <span class="math inline">\(km^2\)</span>) as shown in <span class="quarto-unresolved-ref">?fig-glacier_volume_field_calculator</span>.</p>
<p><img src="./images/data/17_0_calculate_glacier_volume_in_field_calculator.png" id="fig-glacier_volume_field_calculator" class="img-fluid" alt="Estimate the glacier volume using an area-volume scaling relationship. Here an example using the empirical scaling relationsihp by Erasov. Note that the area field is in m^2 and needs to be converted to km^2."> We now have an estimate of the water volume stored in each glacier. The goal is to have an estimate of glacier volume in each of the sub-basins and to edit the elevation bands layer in a way that automated model creation in RS MINERVE can create an appropriate GSM object for each glaciated sub-basin. In a first step, we clip the glacier areas from the elevation bands layer BasinElevationbands_Poly_fixed using the tool <strong>Vector/Geoprocessing/Difference</strong>. That layer now only contains HRUs for HBV model objects. You can save this layer to your GIS folder as it will later be merged with the layers for the GSM objects and be your final layer for import to RS MINERVE.</p>
<p>We now prepare the layer for the GSM objects. Intersect the glaciers layer with the elevation bands layer BasinElevationbands_Poly_fixed using the tool <strong>Vector/Geoprocessing/Intersection</strong>. From the glaciers layer you only need the fields RGIId, Area_m2 and Volume_m3. This will give you a layer with the glacier outlines and the elevation bands on the glacier areas. For each of the glaciers you now see in which elevation band it lies.</p>
<p>We now aggregate the glacier area and volume in each elevation band using the field calculator and the formulas <code>sum(Area_m2, group_by := basin_name)</code> and <code>sum(Volume_m3, group_by := basin_name)</code>. The layer is then dissolved using the tool <strong>Vector/Geoprocessing/Dissolve</strong> with the dissolve field basin_name. This merges all features with the same basin_name into one geometric feature of the layer. The fields RGIId, Area_m2 and Volume_m3 are now obsolete and can be removed. We thus now have the total glacier area and volume for each glaciated HRU in the study basin. For simulating runoff formation with the GSM model, we still need an initial glacier thickness which we obtain using the field calculator and dividing the total glacier volume in the HRU by the total glacier area in the HRU. This gives us a total glacier thickness in the basin which is available for melt.</p>
<p>Now we can clean up the layer and merge it with the HBV elevation bands layer we prepared and saved earlier. You may want to edit the names of the features for the GSM objects with a prefix <em>glacier</em> or <em>gl</em> so that you recognize which hydrological model to assign to which HRU in RS MINERVE (see <a href="hydraulic_hydrological_modeling.html#sec-RSM-automatic-model-generation" class="quarto-xref"><span>Section&nbsp;8.6.2</span></a>). You then merge the two vector layers and are ready to import them into RS MINERVE for automated model generation. We save the layer under the name 16297_Chatkal_RSM_HRU.</p>
</section></section></section><section id="sec-geospatial-data-references" class="level2" data-number="5.5"><h2 data-number="5.5" class="anchored" data-anchor-id="sec-geospatial-data-references">
<span class="header-section-number">5.5</span> References</h2>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-erasov_1968" class="csl-entry" role="listitem">
Erasov, N. V. 1968. <span>“Method for Determining of Volume of Mountain Glaciers.”</span> <em>MGI</em>, no. 14: 307–8.
</div>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    const typesetMath = (el) => {
      if (window.MathJax) {
        // MathJax Typeset
        window.MathJax.typeset([el]);
      } else if (window.katex) {
        // KaTeX Render
        var mathElements = el.getElementsByClassName("math");
        var macros = [];
        for (var i = 0; i < mathElements.length; i++) {
          var texText = mathElements[i].firstChild;
          if (mathElements[i].tagName == "SPAN") {
            window.katex.render(texText.data, mathElements[i], {
              displayMode: mathElements[i].classList.contains('display'),
              throwOnError: false,
              macros: macros,
              fleqn: false
            });
          }
        }
      }
    }
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        typesetMath(container);
        return container.innerHTML
      } else {
        typesetMath(note);
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      typesetMath(note);
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./discharge_station_data.html" class="pagination-link  aria-label=">4&nbsp; <span class="chapter-title">Discharge Station Data</span>"&gt;
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Discharge Station Data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./snow_and_glacier_data.html" class="pagination-link" aria-label="<span class='chapter-number'>6</span>&nbsp; <span class='chapter-title'>Snow and Glacier Data</span>">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Snow and Glacier Data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>